<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RISC-V CPU: RISC-V-main/Docs/RTL/as_rv32i_memoryaccess.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="Université_du_Québec_à_Chicoutimi_(logo).png"/></td>
  <td id="projectalign">
   <div id="projectname">RISC-V CPU<span id="projectnumber">&#160;v1</span>
   </div>
   <div id="projectbrief">The goal of this project is to develop RISC-V processors on FPGAs dedicated to artificial intelligence at the edge.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('as__rv32i__memoryaccess_8c_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">as_rv32i_memoryaccess.c</div></div>
</div><!--header-->
<div class="contents">
<a href="as__rv32i__memoryaccess_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span> </div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment">// Company: UQAC</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment">// Engineer: SHACHA</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="comment">// </span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="comment">// Create Date: 08/07/2023 01:15:29 PM</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="comment">// Design Name: </span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="comment">// Module Name: as_rv32i_memoryaccess</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="comment">// Project Name: </span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="comment">// Target Devices: </span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="comment">// Tool Versions: </span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="comment">// Description: Pipeline Stage 4 loads and stores data in memory [MEMORY ACCESS STAGE]</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="comment">/* </span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="comment">   The pipelined processor&#39;s memory access stage is handled by the as_rv32i_memoryaccess module. This module is largely responsible for data memory access for load and save instructions, as well as sending the required information to later pipeline stages. The module is in charge of creating data memory addresses, data to be stored, and write masks for various load/store processes, as well as handling pipeline stalls and flushes as needed. </span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="comment">   The following are key features of the as_rv32i_memoryaccess module:</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="comment"> - Handling addresses and data for load/store operations: The module generates the appropriate data memory address (o_y) from the incoming address (i_y) and saves it in the o_data_store register. It also selects the appropriate byte, halfword, or word data from the data memory input (i_din) based on the funct3 field of the instruction and stores it in the o_data_load register. The write mask (o_wr_mask) is generated based on the address and operation size (byte, halfword, or word). The mask determines which section of the data memory is written during store operations.</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="comment"> - Register writeback control: Based on the input i_wr_rd signal, the module decides whether a destination register should be written (o_wr_rd). It sends the next stage the destination register address (o_rd_addr) and the data to be written (o_rd).</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="comment"> - Data memory control: The module manages data memory read/write requests by sending out the o_stb_data signal, which represents a data memory access request. It also creates the o_wr_mem signal, which signals if a write operation on the data memory should be done.</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="comment"> - Pipeline control: If the data memory access has not yet been acknowledged (i_ack_data) or there is a stall request from the ALU stage (i_stall_from_alu), the module can stall the pipeline by asserting the o_stall signal. It can also use the o_flush signal to flush the current and previous stages based on the input i_flush signal. Based on the stall and flush conditions, the module regulates the clock enable signals (o_ce) for the following step.</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="comment">*/</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="comment">// Dependencies: </span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span><span class="comment">// </span></div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span><span class="comment">// Revision:</span></div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span><span class="comment">// Revision 0.01 - File Created</span></div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span><span class="comment">// Additional Comments:</span></div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span><span class="comment">// </span></div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span><span class="comment"></span> </div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span>`timescale 1ns / 1ps</div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span>`default_nettype none</div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span>`include <span class="stringliteral">&quot;as_rv32i_header.vh&quot;</span></div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span> </div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno"><a class="line" href="as__rv32i__memoryaccess_8c.html#a69f79b67ff8c0ab6c3c2331af5f5d345">   32</a></span>module <a class="code hl_function" href="as__rv32i__memoryaccess_8c.html#a69f79b67ff8c0ab6c3c2331af5f5d345">as_rv32i_memoryaccess</a>(</div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span>    input wire <a class="code hl_variable" href="as__rv32i__core_8c.html#a33f7f7b84d41aa5d9591e6dc3989772d">i_clk</a>, <a class="code hl_variable" href="as__rv32i__core_8c.html#a42126a58596174c8d938df99eaeee057">i_rst_n</a>,</div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span>    input wire[31:0] i_rs2,                 <span class="comment">//data to be stored to memory is always i_rs2</span></div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span>    input wire[31:0] <a class="code hl_variable" href="as__rv32i__core_8c.html#ad6c68b5103411fe2027e837a87cec1c2">i_din</a>,                 <span class="comment">//data retrieve from memory </span></div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span>    input wire[31:0] <a class="code hl_variable" href="as__rv32i__csr_8c.html#aba4226798438727ff4bfcb13fb67d990">i_y</a>,                   <span class="comment">//y value from ALU (address of data to memory be stored or loaded)</span></div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span>    output reg [31:0] o_y,                  <span class="comment">//y value used as data memory address </span></div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span>    input wire[2:0] <a class="code hl_variable" href="as__rv32i__csr_8c.html#af7306f4eb0695d1f982a02472a30eb88">i_funct3</a>,               <span class="comment">//funct3 from previous stage</span></div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span>    output reg[2:0] o_funct3,               <span class="comment">//funct3 (byte,halfword,word)</span></div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span>    input wire[`OPCODE_WIDTH-1:0] <a class="code hl_variable" href="as__rv32i__csr_8c.html#a8bcdbee3ff9302804ae50a10c497b4ea">i_opcode</a>, <span class="comment">//determines if data_store will be to stored to data memory</span></div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span>    output reg[`OPCODE_WIDTH-1:0] o_opcode, <span class="comment">//opcode type</span></div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span>    input wire[31:0] <a class="code hl_variable" href="as__rv32i__csr_8c.html#a555a308f8c05788044cf70ec35840817">i_pc</a>,                  <span class="comment">//PC from previous stage</span></div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span>    output reg[31:0] <a class="code hl_variable" href="as__rv32i__fetch_8c.html#ab5091cd2b5ce373bca9c5171c6295695">o_pc</a>,                  <span class="comment">//PC value</span></div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span> </div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span>    input wire i_wr_rd,         <span class="comment">//write rd to base reg is enabled (from memoryaccess stage)</span></div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span>    output reg <a class="code hl_variable" href="as__rv32i__writeback_8c.html#a02fdc11cdf23d5b1404763d007f0a1dc">o_wr_rd</a>,         <span class="comment">//write rd to the base reg if enabled</span></div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span>    input wire[4:0] i_rd_addr,  <span class="comment">//address for destination register (from previous stage)</span></div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span>    output reg[4:0] <a class="code hl_variable" href="as__rv32i__writeback_8c.html#a5f9c59d0b911dadbb5fe636f50078969">o_rd_addr</a>,  <span class="comment">//address for destination register</span></div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span>    input wire[31:0] i_rd,      <span class="comment">//value to be written back to destination reg</span></div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span>    output reg[31:0] <a class="code hl_variable" href="as__rv32i__writeback_8c.html#aeb9a6f27cfa6e8eb9b1a99df5e042536">o_rd</a>,      <span class="comment">//value to be written back to destination register</span></div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span> </div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span>    output reg[31:0] o_data_store,  <span class="comment">//data to be stored to memory (mask-aligned)</span></div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span>    output reg[31:0] o_data_load,   <span class="comment">//data to be loaded to base reg (z-or-s extended) </span></div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span>    output reg[3:0] <a class="code hl_variable" href="as__rv32i__core_8c.html#a2901c75327328eb671d97d1903a716ce">o_wr_mask</a>,      <span class="comment">//write mask {byte3,byte2,byte1,byte0}</span></div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>    output reg o_wr_mem,            <span class="comment">//write to data memory if enabled</span></div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span>    output reg <a class="code hl_variable" href="as__rv32i__core_8c.html#a6ecbcf3261967e9178a9873642ea80ec">o_stb_data</a>,          <span class="comment">//request for read/write access to data memory</span></div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span>    input wire <a class="code hl_variable" href="as__rv32i__core_8c.html#a7f6af90859c73e1455f4c2fa4025a9d8">i_ack_data</a>,          <span class="comment">//ack by data memory (high when read data is ready or when write data is already written)</span></div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span> </div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span>    input wire i_stall_from_alu,    <span class="comment">//stalls this stage when incoming instruction is a load/store</span></div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span>    input wire <a class="code hl_variable" href="as__rv32i__csr_8c.html#a099f0d7e789c16b0b58efd1f006982ef">i_ce</a>,                <span class="comment">//input clk enable for pipeline stalling of this stage</span></div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>    output reg <a class="code hl_variable" href="as__rv32i__fetch_8c.html#ab5d289c68120d8180db9c4a85b14137a">o_ce</a>,                <span class="comment">//output clk enable for pipeline stalling of next stage</span></div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>    input wire <a class="code hl_variable" href="as__rv32i__csr_8c.html#a04f5dc4fe67f9d756adaf67da4ac52c0">i_stall</a>,             <span class="comment">//informs this stage to stall</span></div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span>    output reg <a class="code hl_variable" href="as__rv32i__writeback_8c.html#a24010168fbf4d736bc91875de484f353">o_stall</a>,             <span class="comment">//informs pipeline to stall</span></div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>    input wire <a class="code hl_variable" href="as__rv32i__fetch_8c.html#a1dc65af1784a8e45813c29a53ff4466d">i_flush</a>,             <span class="comment">//flush this stage</span></div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span>    output reg <a class="code hl_variable" href="as__rv32i__writeback_8c.html#a8dfc9afcb215c78e5b0c28c6efcd898d">o_flush</a>              <span class="comment">//flush previous stages</span></div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>);</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span>    </div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno"><a class="line" href="as__rv32i__memoryaccess_8c.html#a614d07c52968e85ca8483741458498d2">   71</a></span>    reg[31:0] <a class="code hl_variable" href="as__rv32i__memoryaccess_8c.html#a614d07c52968e85ca8483741458498d2">data_store_d</a>;         <span class="comment">//data to be stored to memory</span></div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno"><a class="line" href="as__rv32i__memoryaccess_8c.html#a738ff8ddec9bd1afb35c53f8533290ea">   72</a></span>    reg[31:0] <a class="code hl_variable" href="as__rv32i__memoryaccess_8c.html#a738ff8ddec9bd1afb35c53f8533290ea">data_load_d</a>;          <span class="comment">//data to be loaded to basereg</span></div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno"><a class="line" href="as__rv32i__memoryaccess_8c.html#a91541600b4eab3c9a7da780793ae4b13">   73</a></span>    reg[3:0] <a class="code hl_variable" href="as__rv32i__memoryaccess_8c.html#a91541600b4eab3c9a7da780793ae4b13">wr_mask_d</a>; </div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno"><a class="line" href="as__rv32i__memoryaccess_8c.html#a2f846ad3a038f7753ce1629b3ffc3673">   74</a></span>    wire[1:0] <a class="code hl_variable" href="as__rv32i__memoryaccess_8c.html#a2f846ad3a038f7753ce1629b3ffc3673">addr_2</a> = <a class="code hl_variable" href="as__rv32i__csr_8c.html#aba4226798438727ff4bfcb13fb67d990">i_y</a>[1:0];    <span class="comment">//last 2 bits of data memory address</span></div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno"><a class="line" href="as__rv32i__memoryaccess_8c.html#a1ea7a382ba62ed326b9f6b02e5cf68b7">   75</a></span>    wire <a class="code hl_variable" href="as__rv32i__memoryaccess_8c.html#a1ea7a382ba62ed326b9f6b02e5cf68b7">stall_bit</a> = <a class="code hl_variable" href="as__rv32i__csr_8c.html#a04f5dc4fe67f9d756adaf67da4ac52c0">i_stall</a> || <a class="code hl_variable" href="as__rv32i__writeback_8c.html#a24010168fbf4d736bc91875de484f353">o_stall</a>;</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span> </div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>    <span class="comment">//register the outputs of this module</span></div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno"><a class="line" href="as__rv32i__memoryaccess_8c.html#a7b949d6188f5168dddf554acf134c84c">   78</a></span>    <a class="code hl_function" href="as__rv32i__memoryaccess_8c.html#a7b949d6188f5168dddf554acf134c84c">always</a> @(posedge <a class="code hl_variable" href="as__rv32i__core_8c.html#a33f7f7b84d41aa5d9591e6dc3989772d">i_clk</a>, negedge <a class="code hl_variable" href="as__rv32i__core_8c.html#a42126a58596174c8d938df99eaeee057">i_rst_n</a>) <a class="code hl_variable" href="as__rv32i__core_8c.html#aa5a8548a4d67626e84523b1cea7169e2">begin</a></div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>        <span class="keywordflow">if</span>(!<a class="code hl_variable" href="as__rv32i__core_8c.html#a42126a58596174c8d938df99eaeee057">i_rst_n</a>) <a class="code hl_variable" href="as__rv32i__core_8c.html#aa5a8548a4d67626e84523b1cea7169e2">begin</a></div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>            <a class="code hl_variable" href="as__rv32i__writeback_8c.html#a02fdc11cdf23d5b1404763d007f0a1dc">o_wr_rd</a> &lt;= 0;</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>            o_wr_mem &lt;= 0;</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>            <a class="code hl_variable" href="as__rv32i__fetch_8c.html#ab5d289c68120d8180db9c4a85b14137a">o_ce</a> &lt;= 0;</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>            <a class="code hl_variable" href="as__rv32i__core_8c.html#a6ecbcf3261967e9178a9873642ea80ec">o_stb_data</a> &lt;= 0;</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>        end</div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>        <span class="keywordflow">else</span> <a class="code hl_variable" href="as__rv32i__core_8c.html#aa5a8548a4d67626e84523b1cea7169e2">begin</a></div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>            <span class="keywordflow">if</span>(<a class="code hl_variable" href="as__rv32i__csr_8c.html#a099f0d7e789c16b0b58efd1f006982ef">i_ce</a> &amp;&amp; !<a class="code hl_variable" href="as__rv32i__memoryaccess_8c.html#a1ea7a382ba62ed326b9f6b02e5cf68b7">stall_bit</a>) <a class="code hl_variable" href="as__rv32i__core_8c.html#aa5a8548a4d67626e84523b1cea7169e2">begin</a> <span class="comment">//update register only if this stage is enabled and not stalled</span></div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>                <a class="code hl_variable" href="as__rv32i__writeback_8c.html#a5f9c59d0b911dadbb5fe636f50078969">o_rd_addr</a> &lt;= i_rd_addr;</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>                o_funct3 &lt;= <a class="code hl_variable" href="as__rv32i__csr_8c.html#af7306f4eb0695d1f982a02472a30eb88">i_funct3</a>;</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>                o_opcode &lt;= <a class="code hl_variable" href="as__rv32i__csr_8c.html#a8bcdbee3ff9302804ae50a10c497b4ea">i_opcode</a>;</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>                <a class="code hl_variable" href="as__rv32i__fetch_8c.html#ab5091cd2b5ce373bca9c5171c6295695">o_pc</a> &lt;= <a class="code hl_variable" href="as__rv32i__csr_8c.html#a555a308f8c05788044cf70ec35840817">i_pc</a>;</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>                <a class="code hl_variable" href="as__rv32i__writeback_8c.html#a02fdc11cdf23d5b1404763d007f0a1dc">o_wr_rd</a> &lt;= i_wr_rd;</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>                <a class="code hl_variable" href="as__rv32i__writeback_8c.html#aeb9a6f27cfa6e8eb9b1a99df5e042536">o_rd</a> &lt;= i_rd;</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>                o_data_load &lt;= <a class="code hl_variable" href="as__rv32i__memoryaccess_8c.html#a738ff8ddec9bd1afb35c53f8533290ea">data_load_d</a>; </div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>                <a class="code hl_variable" href="as__rv32i__core_8c.html#a2901c75327328eb671d97d1903a716ce">o_wr_mask</a> &lt;= 0;</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>                o_wr_mem &lt;= 0; </div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>                <a class="code hl_variable" href="as__rv32i__core_8c.html#a6ecbcf3261967e9178a9873642ea80ec">o_stb_data</a> &lt;= 0;</div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>            end</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code hl_variable" href="as__rv32i__csr_8c.html#a099f0d7e789c16b0b58efd1f006982ef">i_ce</a>) <a class="code hl_variable" href="as__rv32i__core_8c.html#aa5a8548a4d67626e84523b1cea7169e2">begin</a></div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>                <span class="comment">//stb goes high when instruction is a load/store and when request is not already high (request lasts for 1 clk cycle only)</span></div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>                <a class="code hl_variable" href="as__rv32i__core_8c.html#a6ecbcf3261967e9178a9873642ea80ec">o_stb_data</a> &lt;= (<a class="code hl_variable" href="as__rv32i__core_8c.html#a6ecbcf3261967e9178a9873642ea80ec">o_stb_data</a> &amp;&amp; <a class="code hl_variable" href="as__rv32i__memoryaccess_8c.html#a1ea7a382ba62ed326b9f6b02e5cf68b7">stall_bit</a>)? 0:<a class="code hl_variable" href="as__rv32i__csr_8c.html#a8bcdbee3ff9302804ae50a10c497b4ea">i_opcode</a>[`LOAD] || <a class="code hl_variable" href="as__rv32i__csr_8c.html#a8bcdbee3ff9302804ae50a10c497b4ea">i_opcode</a>[`STORE]; </div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span>                <a class="code hl_variable" href="as__rv32i__core_8c.html#a2901c75327328eb671d97d1903a716ce">o_wr_mask</a> &lt;= <a class="code hl_variable" href="as__rv32i__core_8c.html#a6ecbcf3261967e9178a9873642ea80ec">o_stb_data</a>? 0:<a class="code hl_variable" href="as__rv32i__memoryaccess_8c.html#a91541600b4eab3c9a7da780793ae4b13">wr_mask_d</a>;</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>                o_wr_mem &lt;= <a class="code hl_variable" href="as__rv32i__core_8c.html#a6ecbcf3261967e9178a9873642ea80ec">o_stb_data</a>? 0:<a class="code hl_variable" href="as__rv32i__csr_8c.html#a8bcdbee3ff9302804ae50a10c497b4ea">i_opcode</a>[`STORE]; </div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>            end</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span> </div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span>            <span class="comment">//update this registers even on stall since this will be used for accessing the data memory while on stall</span></div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>            o_y &lt;= <a class="code hl_variable" href="as__rv32i__csr_8c.html#aba4226798438727ff4bfcb13fb67d990">i_y</a>; <span class="comment">//data memory address</span></div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>            o_data_store &lt;= <a class="code hl_variable" href="as__rv32i__memoryaccess_8c.html#a614d07c52968e85ca8483741458498d2">data_store_d</a>;</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span> </div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>            <span class="keywordflow">if</span>(<a class="code hl_variable" href="as__rv32i__fetch_8c.html#a1dc65af1784a8e45813c29a53ff4466d">i_flush</a> &amp;&amp; !<a class="code hl_variable" href="as__rv32i__memoryaccess_8c.html#a1ea7a382ba62ed326b9f6b02e5cf68b7">stall_bit</a>) <a class="code hl_variable" href="as__rv32i__core_8c.html#aa5a8548a4d67626e84523b1cea7169e2">begin</a> <span class="comment">//flush this stage so clock-enable of next stage is disabled at next clock cycle</span></div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>                <a class="code hl_variable" href="as__rv32i__fetch_8c.html#ab5d289c68120d8180db9c4a85b14137a">o_ce</a> &lt;= 0;</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>                o_wr_mem &lt;= 0;</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>            end</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(!<a class="code hl_variable" href="as__rv32i__memoryaccess_8c.html#a1ea7a382ba62ed326b9f6b02e5cf68b7">stall_bit</a>) <a class="code hl_variable" href="as__rv32i__core_8c.html#aa5a8548a4d67626e84523b1cea7169e2">begin</a> <span class="comment">//clock-enable will change only when not stalled</span></div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>                <a class="code hl_variable" href="as__rv32i__fetch_8c.html#ab5d289c68120d8180db9c4a85b14137a">o_ce</a> &lt;= <a class="code hl_variable" href="as__rv32i__csr_8c.html#a099f0d7e789c16b0b58efd1f006982ef">i_ce</a>;</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>            end</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>            <span class="comment">//if this stage is stalled but next stage is not, disable clock enable of next stage at next clock cycle (pipeline bubble)</span></div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code hl_variable" href="as__rv32i__memoryaccess_8c.html#a1ea7a382ba62ed326b9f6b02e5cf68b7">stall_bit</a> &amp;&amp; !<a class="code hl_variable" href="as__rv32i__csr_8c.html#a04f5dc4fe67f9d756adaf67da4ac52c0">i_stall</a>) <a class="code hl_variable" href="as__rv32i__fetch_8c.html#ab5d289c68120d8180db9c4a85b14137a">o_ce</a> &lt;= 0;         </div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>        end</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span> </div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>    end </div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span> </div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>    <span class="comment">//determine data to be loaded to basereg or stored to data memory </span></div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>    <a class="code hl_function" href="as__rv32i__memoryaccess_8c.html#a7b949d6188f5168dddf554acf134c84c">always</a> @* <a class="code hl_variable" href="as__rv32i__core_8c.html#aa5a8548a4d67626e84523b1cea7169e2">begin</a></div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>        <span class="comment">//stall while data memory has not yet acknowledged i.e.wWrite data is not yet written or read data is not yet available. Don&#39;t stall when need to flush by next stage</span></div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>        <a class="code hl_variable" href="as__rv32i__writeback_8c.html#a24010168fbf4d736bc91875de484f353">o_stall</a> = ((i_stall_from_alu &amp;&amp; <a class="code hl_variable" href="as__rv32i__csr_8c.html#a099f0d7e789c16b0b58efd1f006982ef">i_ce</a> &amp;&amp; !<a class="code hl_variable" href="as__rv32i__core_8c.html#a7f6af90859c73e1455f4c2fa4025a9d8">i_ack_data</a>) || <a class="code hl_variable" href="as__rv32i__csr_8c.html#a04f5dc4fe67f9d756adaf67da4ac52c0">i_stall</a>) &amp;&amp; !<a class="code hl_variable" href="as__rv32i__fetch_8c.html#a1dc65af1784a8e45813c29a53ff4466d">i_flush</a>;         </div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>        <a class="code hl_variable" href="as__rv32i__writeback_8c.html#a8dfc9afcb215c78e5b0c28c6efcd898d">o_flush</a> = <a class="code hl_variable" href="as__rv32i__fetch_8c.html#a1dc65af1784a8e45813c29a53ff4466d">i_flush</a>; <span class="comment">//flush this stage along with previous stages</span></div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>        <a class="code hl_variable" href="as__rv32i__memoryaccess_8c.html#a614d07c52968e85ca8483741458498d2">data_store_d</a> = 0;</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>        <a class="code hl_variable" href="as__rv32i__memoryaccess_8c.html#a738ff8ddec9bd1afb35c53f8533290ea">data_load_d</a> = 0;</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>        <a class="code hl_variable" href="as__rv32i__memoryaccess_8c.html#a91541600b4eab3c9a7da780793ae4b13">wr_mask_d</a> = 0; </div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>           </div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>        <span class="keywordflow">case</span>(<a class="code hl_variable" href="as__rv32i__csr_8c.html#af7306f4eb0695d1f982a02472a30eb88">i_funct3</a>[1:0]) </div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>            2&#39;b00: <a class="code hl_variable" href="as__rv32i__core_8c.html#aa5a8548a4d67626e84523b1cea7169e2">begin</a> <span class="comment">//byte load/store</span></div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>                    case(<a class="code hl_variable" href="as__rv32i__memoryaccess_8c.html#a2f846ad3a038f7753ce1629b3ffc3673">addr_2</a>)  <span class="comment">//choose which of the 4 byte will be loaded to basereg</span></div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>                        2&#39;b00: <a class="code hl_variable" href="as__rv32i__memoryaccess_8c.html#a738ff8ddec9bd1afb35c53f8533290ea">data_load_d</a> = {24&#39;b0, <a class="code hl_variable" href="as__rv32i__core_8c.html#ad6c68b5103411fe2027e837a87cec1c2">i_din</a>[7:0]};</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>                        2&#39;b01: <a class="code hl_variable" href="as__rv32i__memoryaccess_8c.html#a738ff8ddec9bd1afb35c53f8533290ea">data_load_d</a> = {24&#39;b0, <a class="code hl_variable" href="as__rv32i__core_8c.html#ad6c68b5103411fe2027e837a87cec1c2">i_din</a>[15:8]};</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>                        2&#39;b10: <a class="code hl_variable" href="as__rv32i__memoryaccess_8c.html#a738ff8ddec9bd1afb35c53f8533290ea">data_load_d</a> = {24&#39;b0, <a class="code hl_variable" href="as__rv32i__core_8c.html#ad6c68b5103411fe2027e837a87cec1c2">i_din</a>[23:16]};</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>                        2&#39;b11: <a class="code hl_variable" href="as__rv32i__memoryaccess_8c.html#a738ff8ddec9bd1afb35c53f8533290ea">data_load_d</a> = {24&#39;b0, <a class="code hl_variable" href="as__rv32i__core_8c.html#ad6c68b5103411fe2027e837a87cec1c2">i_din</a>[31:24]};</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>                    endcase</div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>                    <a class="code hl_variable" href="as__rv32i__memoryaccess_8c.html#a738ff8ddec9bd1afb35c53f8533290ea">data_load_d</a> = {{{24{!<a class="code hl_variable" href="as__rv32i__csr_8c.html#af7306f4eb0695d1f982a02472a30eb88">i_funct3</a>[2]}} &amp; {24{<a class="code hl_variable" href="as__rv32i__memoryaccess_8c.html#a738ff8ddec9bd1afb35c53f8533290ea">data_load_d</a>[7]}}} , <a class="code hl_variable" href="as__rv32i__memoryaccess_8c.html#a738ff8ddec9bd1afb35c53f8533290ea">data_load_d</a>[7:0]}; <span class="comment">//signed and unsigned extension in 1 equation</span></div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>                    <a class="code hl_variable" href="as__rv32i__memoryaccess_8c.html#a91541600b4eab3c9a7da780793ae4b13">wr_mask_d</a> = 4&#39;b0001&lt;&lt;<a class="code hl_variable" href="as__rv32i__memoryaccess_8c.html#a2f846ad3a038f7753ce1629b3ffc3673">addr_2</a>; <span class="comment">//mask 1 of the 4 bytes</span></div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>                    <a class="code hl_variable" href="as__rv32i__memoryaccess_8c.html#a614d07c52968e85ca8483741458498d2">data_store_d</a> = i_rs2&lt;&lt;{<a class="code hl_variable" href="as__rv32i__memoryaccess_8c.html#a2f846ad3a038f7753ce1629b3ffc3673">addr_2</a>,3&#39;b000}; <span class="comment">//i_rs2&lt;&lt;(addr_2*8) , align data to mask</span></div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>                   end</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>            2&#39;b01: <a class="code hl_variable" href="as__rv32i__core_8c.html#aa5a8548a4d67626e84523b1cea7169e2">begin</a> <span class="comment">//halfword load/store</span></div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>                    <a class="code hl_variable" href="as__rv32i__memoryaccess_8c.html#a738ff8ddec9bd1afb35c53f8533290ea">data_load_d</a> = <a class="code hl_variable" href="as__rv32i__memoryaccess_8c.html#a2f846ad3a038f7753ce1629b3ffc3673">addr_2</a>[1]? {16&#39;b0,<a class="code hl_variable" href="as__rv32i__core_8c.html#ad6c68b5103411fe2027e837a87cec1c2">i_din</a>[31:16]}: {16&#39;b0,<a class="code hl_variable" href="as__rv32i__core_8c.html#ad6c68b5103411fe2027e837a87cec1c2">i_din</a>[15:0]}; <span class="comment">//choose which of the 2 halfwords will be loaded to basereg</span></div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>                    <a class="code hl_variable" href="as__rv32i__memoryaccess_8c.html#a738ff8ddec9bd1afb35c53f8533290ea">data_load_d</a> = {{{16{!<a class="code hl_variable" href="as__rv32i__csr_8c.html#af7306f4eb0695d1f982a02472a30eb88">i_funct3</a>[2]}} &amp; {16{<a class="code hl_variable" href="as__rv32i__memoryaccess_8c.html#a738ff8ddec9bd1afb35c53f8533290ea">data_load_d</a>[15]}}},<a class="code hl_variable" href="as__rv32i__memoryaccess_8c.html#a738ff8ddec9bd1afb35c53f8533290ea">data_load_d</a>[15:0]}; <span class="comment">//signed and unsigned extension in 1 equation</span></div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>                    <a class="code hl_variable" href="as__rv32i__memoryaccess_8c.html#a91541600b4eab3c9a7da780793ae4b13">wr_mask_d</a> = 4&#39;b0011&lt;&lt;{<a class="code hl_variable" href="as__rv32i__memoryaccess_8c.html#a2f846ad3a038f7753ce1629b3ffc3673">addr_2</a>[1],1&#39;b0}; <span class="comment">//mask either the upper or lower half-word</span></div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>                    <a class="code hl_variable" href="as__rv32i__memoryaccess_8c.html#a614d07c52968e85ca8483741458498d2">data_store_d</a> = i_rs2&lt;&lt;{<a class="code hl_variable" href="as__rv32i__memoryaccess_8c.html#a2f846ad3a038f7753ce1629b3ffc3673">addr_2</a>[1],4&#39;b0000}; <span class="comment">//i_rs2&lt;&lt;(addr_2[1]*16) , align data to mask</span></div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>                   end</div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>            2&#39;b10: <a class="code hl_variable" href="as__rv32i__core_8c.html#aa5a8548a4d67626e84523b1cea7169e2">begin</a> <span class="comment">//word load/store</span></div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>                    <a class="code hl_variable" href="as__rv32i__memoryaccess_8c.html#a738ff8ddec9bd1afb35c53f8533290ea">data_load_d</a> = <a class="code hl_variable" href="as__rv32i__core_8c.html#ad6c68b5103411fe2027e837a87cec1c2">i_din</a>;</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>                    <a class="code hl_variable" href="as__rv32i__memoryaccess_8c.html#a91541600b4eab3c9a7da780793ae4b13">wr_mask_d</a> = 4&#39;b1111; <span class="comment">//mask all</span></div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>                    <a class="code hl_variable" href="as__rv32i__memoryaccess_8c.html#a614d07c52968e85ca8483741458498d2">data_store_d</a> = i_rs2;</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>                   end</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>          <span class="keywordflow">default</span>: <a class="code hl_variable" href="as__rv32i__core_8c.html#aa5a8548a4d67626e84523b1cea7169e2">begin</a></div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>                    <a class="code hl_variable" href="as__rv32i__memoryaccess_8c.html#a614d07c52968e85ca8483741458498d2">data_store_d</a> = 0;</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>                    <a class="code hl_variable" href="as__rv32i__memoryaccess_8c.html#a738ff8ddec9bd1afb35c53f8533290ea">data_load_d</a> = 0;</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>                    <a class="code hl_variable" href="as__rv32i__memoryaccess_8c.html#a91541600b4eab3c9a7da780793ae4b13">wr_mask_d</a> = 0; </div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>                   end</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>        endcase</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>    end</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span> </div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span> </div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>endmodule</div>
<div class="ttc" id="aas__rv32i__core_8c_html_a2901c75327328eb671d97d1903a716ce"><div class="ttname"><a href="as__rv32i__core_8c.html#a2901c75327328eb671d97d1903a716ce">o_wr_mask</a></div><div class="ttdeci">timescale default_nettype none include as_rv32i_header vh module as_rv32i_core input wire input wire[31:0] output wire[31:0] output wire input wire input wire[31:0] output wire[31:0] output wire[31:0] output wire[3:0] o_wr_mask</div><div class="ttdoc">write mask control</div><div class="ttdef"><b>Definition</b> <a href="as__rv32i__core_8c_source.html#l00064">as_rv32i_core.c:64</a></div></div>
<div class="ttc" id="aas__rv32i__core_8c_html_a33f7f7b84d41aa5d9591e6dc3989772d"><div class="ttname"><a href="as__rv32i__core_8c.html#a33f7f7b84d41aa5d9591e6dc3989772d">i_clk</a></div><div class="ttdeci">timescale default_nettype none include as_rv32i_header vh module as_rv32i_core input wire i_clk</div><div class="ttdoc">Top-level module for the RV32I core.</div><div class="ttdef"><b>Definition</b> <a href="as__rv32i__core_8c_source.html#l00052">as_rv32i_core.c:52</a></div></div>
<div class="ttc" id="aas__rv32i__core_8c_html_a42126a58596174c8d938df99eaeee057"><div class="ttname"><a href="as__rv32i__core_8c.html#a42126a58596174c8d938df99eaeee057">i_rst_n</a></div><div class="ttdeci">timescale default_nettype none include as_rv32i_header vh module as_rv32i_core input wire i_rst_n</div><div class="ttdef"><b>Definition</b> <a href="as__rv32i__core_8c_source.html#l00052">as_rv32i_core.c:52</a></div></div>
<div class="ttc" id="aas__rv32i__core_8c_html_a6ecbcf3261967e9178a9873642ea80ec"><div class="ttname"><a href="as__rv32i__core_8c.html#a6ecbcf3261967e9178a9873642ea80ec">o_stb_data</a></div><div class="ttdeci">timescale default_nettype none include as_rv32i_header vh module as_rv32i_core input wire input wire[31:0] output wire[31:0] output wire input wire input wire[31:0] output wire[31:0] output wire[31:0] output wire[3:0] output wire output wire o_stb_data</div><div class="ttdoc">request for read/write access to data memory</div><div class="ttdef"><b>Definition</b> <a href="as__rv32i__core_8c_source.html#l00066">as_rv32i_core.c:66</a></div></div>
<div class="ttc" id="aas__rv32i__core_8c_html_a7f6af90859c73e1455f4c2fa4025a9d8"><div class="ttname"><a href="as__rv32i__core_8c.html#a7f6af90859c73e1455f4c2fa4025a9d8">i_ack_data</a></div><div class="ttdeci">timescale default_nettype none include as_rv32i_header vh module as_rv32i_core input wire input wire[31:0] output wire[31:0] output wire input wire input wire[31:0] output wire[31:0] output wire[31:0] output wire[3:0] output wire output wire input wire i_ack_data</div><div class="ttdoc">ack by data memory (high when read data is ready or when write data is already written)</div><div class="ttdef"><b>Definition</b> <a href="as__rv32i__core_8c_source.html#l00067">as_rv32i_core.c:67</a></div></div>
<div class="ttc" id="aas__rv32i__core_8c_html_aa5a8548a4d67626e84523b1cea7169e2"><div class="ttname"><a href="as__rv32i__core_8c.html#aa5a8548a4d67626e84523b1cea7169e2">begin</a></div><div class="ttdeci">end else begin</div><div class="ttdef"><b>Definition</b> <a href="as__rv32i__core_8c_source.html#l00396">as_rv32i_core.c:397</a></div></div>
<div class="ttc" id="aas__rv32i__core_8c_html_ad6c68b5103411fe2027e837a87cec1c2"><div class="ttname"><a href="as__rv32i__core_8c.html#ad6c68b5103411fe2027e837a87cec1c2">i_din</a></div><div class="ttdeci">timescale default_nettype none include as_rv32i_header vh module as_rv32i_core input wire input wire[31:0] output wire[31:0] output wire input wire input wire[31:0] i_din</div><div class="ttdoc">Data Memory Interface (32 bit ram) ///.</div><div class="ttdef"><b>Definition</b> <a href="as__rv32i__core_8c_source.html#l00061">as_rv32i_core.c:61</a></div></div>
<div class="ttc" id="aas__rv32i__csr_8c_html_a04f5dc4fe67f9d756adaf67da4ac52c0"><div class="ttname"><a href="as__rv32i__csr_8c.html#a04f5dc4fe67f9d756adaf67da4ac52c0">i_stall</a></div><div class="ttdeci">timescale default_nettype none include as_rv32i_header vh module as_rv32i_csr input wire input wire input wire input wire input wire input wire input wire input wire input wire[`OPCODE_WIDTH-1:0] input wire[31:0] input wire[2:0] input wire[11:0] input wire[31:0] input wire[31:0] output reg[31:0] input wire[31:0] input wire output reg[31:0] output reg[31:0] output reg output reg input wire input wire input wire i_stall</div><div class="ttdef"><b>Definition</b> <a href="as__rv32i__csr_8c_source.html#l00067">as_rv32i_csr.c:68</a></div></div>
<div class="ttc" id="aas__rv32i__csr_8c_html_a099f0d7e789c16b0b58efd1f006982ef"><div class="ttname"><a href="as__rv32i__csr_8c.html#a099f0d7e789c16b0b58efd1f006982ef">i_ce</a></div><div class="ttdeci">timescale default_nettype none include as_rv32i_header vh module as_rv32i_csr input wire input wire input wire input wire input wire input wire input wire input wire input wire[`OPCODE_WIDTH-1:0] input wire[31:0] input wire[2:0] input wire[11:0] input wire[31:0] input wire[31:0] output reg[31:0] input wire[31:0] input wire output reg[31:0] output reg[31:0] output reg output reg input wire input wire i_ce</div><div class="ttdoc">Pipeline Control ///.</div><div class="ttdef"><b>Definition</b> <a href="as__rv32i__csr_8c_source.html#l00066">as_rv32i_csr.c:66</a></div></div>
<div class="ttc" id="aas__rv32i__csr_8c_html_a555a308f8c05788044cf70ec35840817"><div class="ttname"><a href="as__rv32i__csr_8c.html#a555a308f8c05788044cf70ec35840817">i_pc</a></div><div class="ttdeci">timescale default_nettype none include as_rv32i_header vh module as_rv32i_csr input wire input wire input wire input wire input wire input wire input wire input wire input wire[`OPCODE_WIDTH-1:0] input wire[31:0] input wire[2:0] input wire[11:0] input wire[31:0] input wire[31:0] output reg[31:0] input wire[31:0] i_pc</div><div class="ttdef"><b>Definition</b> <a href="as__rv32i__csr_8c_source.html#l00057">as_rv32i_csr.c:57</a></div></div>
<div class="ttc" id="aas__rv32i__csr_8c_html_a8bcdbee3ff9302804ae50a10c497b4ea"><div class="ttname"><a href="as__rv32i__csr_8c.html#a8bcdbee3ff9302804ae50a10c497b4ea">i_opcode</a></div><div class="ttdeci">timescale default_nettype none include as_rv32i_header vh module as_rv32i_csr input wire input wire input wire input wire input wire input wire input wire input wire input wire[`OPCODE_WIDTH-1:0] i_opcode</div><div class="ttdoc">Instruction/Load/Store Misaligned Exception///.</div><div class="ttdef"><b>Definition</b> <a href="as__rv32i__csr_8c_source.html#l00046">as_rv32i_csr.c:46</a></div></div>
<div class="ttc" id="aas__rv32i__csr_8c_html_aba4226798438727ff4bfcb13fb67d990"><div class="ttname"><a href="as__rv32i__csr_8c.html#aba4226798438727ff4bfcb13fb67d990">i_y</a></div><div class="ttdeci">timescale default_nettype none include as_rv32i_header vh module as_rv32i_csr input wire input wire input wire input wire input wire input wire input wire input wire input wire[`OPCODE_WIDTH-1:0] input wire[31:0] i_y</div><div class="ttdef"><b>Definition</b> <a href="as__rv32i__csr_8c_source.html#l00047">as_rv32i_csr.c:47</a></div></div>
<div class="ttc" id="aas__rv32i__csr_8c_html_af7306f4eb0695d1f982a02472a30eb88"><div class="ttname"><a href="as__rv32i__csr_8c.html#af7306f4eb0695d1f982a02472a30eb88">i_funct3</a></div><div class="ttdeci">timescale default_nettype none include as_rv32i_header vh module as_rv32i_csr input wire input wire input wire input wire input wire input wire input wire input wire input wire[`OPCODE_WIDTH-1:0] input wire[31:0] input wire[2:0] i_funct3</div><div class="ttdoc">CSR instruction ///.</div><div class="ttdef"><b>Definition</b> <a href="as__rv32i__csr_8c_source.html#l00050">as_rv32i_csr.c:50</a></div></div>
<div class="ttc" id="aas__rv32i__fetch_8c_html_a1dc65af1784a8e45813c29a53ff4466d"><div class="ttname"><a href="as__rv32i__fetch_8c.html#a1dc65af1784a8e45813c29a53ff4466d">i_flush</a></div><div class="ttdeci">timescale default_nettype none include as_rv32i_header vh module as_rv32i_fetch input wire output reg[31:0] output reg[31:0] input wire[31:0] output reg[31:0] output wire input wire input wire input wire[31:0] input wire input wire[31:0] output reg input wire input wire i_flush</div><div class="ttdef"><b>Definition</b> <a href="as__rv32i__fetch_8c_source.html#l00051">as_rv32i_fetch.c:52</a></div></div>
<div class="ttc" id="aas__rv32i__fetch_8c_html_ab5091cd2b5ce373bca9c5171c6295695"><div class="ttname"><a href="as__rv32i__fetch_8c.html#ab5091cd2b5ce373bca9c5171c6295695">o_pc</a></div><div class="ttdeci">timescale default_nettype none include as_rv32i_header vh module as_rv32i_fetch input wire output reg[31:0] output reg[31:0] o_pc</div><div class="ttdef"><b>Definition</b> <a href="as__rv32i__fetch_8c_source.html#l00036">as_rv32i_fetch.c:36</a></div></div>
<div class="ttc" id="aas__rv32i__fetch_8c_html_ab5d289c68120d8180db9c4a85b14137a"><div class="ttname"><a href="as__rv32i__fetch_8c.html#ab5d289c68120d8180db9c4a85b14137a">o_ce</a></div><div class="ttdeci">timescale default_nettype none include as_rv32i_header vh module as_rv32i_fetch input wire output reg[31:0] output reg[31:0] input wire[31:0] output reg[31:0] output wire input wire input wire input wire[31:0] input wire input wire[31:0] output reg o_ce</div><div class="ttdoc">Pipeline Control ///.</div><div class="ttdef"><b>Definition</b> <a href="as__rv32i__fetch_8c_source.html#l00049">as_rv32i_fetch.c:49</a></div></div>
<div class="ttc" id="aas__rv32i__memoryaccess_8c_html_a1ea7a382ba62ed326b9f6b02e5cf68b7"><div class="ttname"><a href="as__rv32i__memoryaccess_8c.html#a1ea7a382ba62ed326b9f6b02e5cf68b7">stall_bit</a></div><div class="ttdeci">wire stall_bit</div><div class="ttdef"><b>Definition</b> <a href="as__rv32i__memoryaccess_8c_source.html#l00075">as_rv32i_memoryaccess.c:75</a></div></div>
<div class="ttc" id="aas__rv32i__memoryaccess_8c_html_a2f846ad3a038f7753ce1629b3ffc3673"><div class="ttname"><a href="as__rv32i__memoryaccess_8c.html#a2f846ad3a038f7753ce1629b3ffc3673">addr_2</a></div><div class="ttdeci">wire[1:0] addr_2</div><div class="ttdef"><b>Definition</b> <a href="as__rv32i__memoryaccess_8c_source.html#l00074">as_rv32i_memoryaccess.c:74</a></div></div>
<div class="ttc" id="aas__rv32i__memoryaccess_8c_html_a614d07c52968e85ca8483741458498d2"><div class="ttname"><a href="as__rv32i__memoryaccess_8c.html#a614d07c52968e85ca8483741458498d2">data_store_d</a></div><div class="ttdeci">reg[31:0] data_store_d</div><div class="ttdef"><b>Definition</b> <a href="as__rv32i__memoryaccess_8c_source.html#l00071">as_rv32i_memoryaccess.c:71</a></div></div>
<div class="ttc" id="aas__rv32i__memoryaccess_8c_html_a69f79b67ff8c0ab6c3c2331af5f5d345"><div class="ttname"><a href="as__rv32i__memoryaccess_8c.html#a69f79b67ff8c0ab6c3c2331af5f5d345">as_rv32i_memoryaccess</a></div><div class="ttdeci">timescale default_nettype none include as_rv32i_header vh module as_rv32i_memoryaccess(input wire i_clk, i_rst_n, input wire[31:0] i_rs2, input wire[31:0] i_din, input wire[31:0] i_y, output reg[31:0] o_y, input wire[2:0] i_funct3, output reg[2:0] o_funct3, input wire[`OPCODE_WIDTH-1:0] i_opcode, output reg[`OPCODE_WIDTH-1:0] o_opcode, input wire[31:0] i_pc, output reg[31:0] o_pc, input wire i_wr_rd, output reg o_wr_rd, input wire[4:0] i_rd_addr, output reg[4:0] o_rd_addr, input wire[31:0] i_rd, output reg[31:0] o_rd, output reg[31:0] o_data_store, output reg[31:0] o_data_load, output reg[3:0] o_wr_mask, output reg o_wr_mem, output reg o_stb_data, input wire i_ack_data, input wire i_stall_from_alu, input wire i_ce, output reg o_ce, input wire i_stall, output reg o_stall, input wire i_flush, output reg o_flush)</div></div>
<div class="ttc" id="aas__rv32i__memoryaccess_8c_html_a738ff8ddec9bd1afb35c53f8533290ea"><div class="ttname"><a href="as__rv32i__memoryaccess_8c.html#a738ff8ddec9bd1afb35c53f8533290ea">data_load_d</a></div><div class="ttdeci">reg[31:0] data_load_d</div><div class="ttdef"><b>Definition</b> <a href="as__rv32i__memoryaccess_8c_source.html#l00072">as_rv32i_memoryaccess.c:72</a></div></div>
<div class="ttc" id="aas__rv32i__memoryaccess_8c_html_a7b949d6188f5168dddf554acf134c84c"><div class="ttname"><a href="as__rv32i__memoryaccess_8c.html#a7b949d6188f5168dddf554acf134c84c">always</a></div><div class="ttdeci">always(posedge i_clk, negedge i_rst_n) begin if(!i_rst_n) begin o_wr_rd&lt;=0</div></div>
<div class="ttc" id="aas__rv32i__memoryaccess_8c_html_a91541600b4eab3c9a7da780793ae4b13"><div class="ttname"><a href="as__rv32i__memoryaccess_8c.html#a91541600b4eab3c9a7da780793ae4b13">wr_mask_d</a></div><div class="ttdeci">reg[3:0] wr_mask_d</div><div class="ttdef"><b>Definition</b> <a href="as__rv32i__memoryaccess_8c_source.html#l00073">as_rv32i_memoryaccess.c:73</a></div></div>
<div class="ttc" id="aas__rv32i__writeback_8c_html_a02fdc11cdf23d5b1404763d007f0a1dc"><div class="ttname"><a href="as__rv32i__writeback_8c.html#a02fdc11cdf23d5b1404763d007f0a1dc">o_wr_rd</a></div><div class="ttdeci">o_wr_rd</div><div class="ttdef"><b>Definition</b> <a href="as__rv32i__writeback_8c_source.html#l00068">as_rv32i_writeback.c:68</a></div></div>
<div class="ttc" id="aas__rv32i__writeback_8c_html_a24010168fbf4d736bc91875de484f353"><div class="ttname"><a href="as__rv32i__writeback_8c.html#a24010168fbf4d736bc91875de484f353">o_stall</a></div><div class="ttdeci">always *begin o_stall</div><div class="ttdef"><b>Definition</b> <a href="as__rv32i__writeback_8c_source.html#l00066">as_rv32i_writeback.c:66</a></div></div>
<div class="ttc" id="aas__rv32i__writeback_8c_html_a5f9c59d0b911dadbb5fe636f50078969"><div class="ttname"><a href="as__rv32i__writeback_8c.html#a5f9c59d0b911dadbb5fe636f50078969">o_rd_addr</a></div><div class="ttdeci">o_rd_addr</div><div class="ttdef"><b>Definition</b> <a href="as__rv32i__writeback_8c_source.html#l00069">as_rv32i_writeback.c:69</a></div></div>
<div class="ttc" id="aas__rv32i__writeback_8c_html_a8dfc9afcb215c78e5b0c28c6efcd898d"><div class="ttname"><a href="as__rv32i__writeback_8c.html#a8dfc9afcb215c78e5b0c28c6efcd898d">o_flush</a></div><div class="ttdeci">o_flush</div><div class="ttdef"><b>Definition</b> <a href="as__rv32i__writeback_8c_source.html#l00067">as_rv32i_writeback.c:67</a></div></div>
<div class="ttc" id="aas__rv32i__writeback_8c_html_aeb9a6f27cfa6e8eb9b1a99df5e042536"><div class="ttname"><a href="as__rv32i__writeback_8c.html#aeb9a6f27cfa6e8eb9b1a99df5e042536">o_rd</a></div><div class="ttdeci">o_rd</div><div class="ttdef"><b>Definition</b> <a href="as__rv32i__writeback_8c_source.html#l00070">as_rv32i_writeback.c:70</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_35191fc563656ec8e3f935b60461952d.html">RISC-V-main</a></li><li class="navelem"><a class="el" href="dir_275d7bbcd657260ed72fb35e0e3948dd.html">Docs</a></li><li class="navelem"><a class="el" href="dir_569154f18a69f4f69df5baf3de4c8d50.html">RTL</a></li><li class="navelem"><a class="el" href="as__rv32i__memoryaccess_8c.html">as_rv32i_memoryaccess.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7 </li>
  </ul>
</div>
</body>
</html>
